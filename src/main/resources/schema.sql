DROP TABLE IF EXISTS REGISTRATIONS;
DROP TABLE IF EXISTS STUDENTS;
DROP TABLE IF EXISTS COURSES;


CREATE TABLE STUDENTS (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  FIRSTNAME VARCHAR(128) NOT NULL,
  LASTNAME VARCHAR(128) NOT NULL,
  PRIMARY KEY (ID)
);


CREATE TABLE COURSES (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  TITLE VARCHAR(64) NOT NULL,
  LIMIT_PERSON BIGINT NOT NULL,
  START_REG TIMESTAMP,
  FINISH_REG TIMESTAMP,
  PRIMARY KEY (ID)
);

CREATE TABLE REGISTRATIONS (
  COURSE_ID BIGINT,
  STUDENT_ID BIGINT
);


ALTER TABLE REGISTRATIONS ADD CONSTRAINT FK_REGISTRATIONS_COURSE  FOREIGN KEY (COURSE_ID) REFERENCES COURSES (ID) ON DELETE CASCADE;

ALTER TABLE REGISTRATIONS ADD CONSTRAINT FK_REGISTRATIONS_STUDENT  FOREIGN KEY (STUDENT_ID) REFERENCES STUDENTS (ID) ON DELETE CASCADE;
