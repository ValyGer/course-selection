DROP TABLE IF EXISTS STUDENT;
DROP TABLE IF EXISTS COURSE;

CREATE TABLE STUDENTS (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  FIRSTNAME VARCHAR(128) NOT NULL,
  LASTNAME VARCHAR(128) NOT NULL,
  PRIMARY KEY (ID)
);


CREATE TABLE COURSES (
  ID BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
  TITLE VARCHAR(64) NOT NULL,
  LIMIT_PERSON NOT NULL,
  PRIMARY KEY (ID)
);

CREATE TABLE REGISTRATIONS (
  COURSE_ID BIGINT,
  STUDENT_ID BIGINT,
  PRIMARY KEY (COURSE_ID, STUDENT_ID)
);


ALTER TABLE REGISTRATIONS ADD CONSTRAINT FK_REGISTRATION_COURSE  FOREIGN KEY (COURSE_ID) REFERENCES COURSE (ID) ON DELETE CASCADE;

ALTER TABLE REGISTRATIONS ADD CONSTRAINT FK_REGISTRATION_STUDENT  FOREIGN KEY (STUDENT_ID) REFERENCES USERS (ID) ON DELETE CASCADE;
